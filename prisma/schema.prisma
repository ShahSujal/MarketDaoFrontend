generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}
enum Status {
  ACTIVE
  INACTIVE
  ADMINREMOVED
}

model User {
  walletAddress String @id
  name          String?
  bio           String?
  image         String?
  investments   Investment[]
  pitches       Pitch[]
  stakes        Stake[]
  liquiditys    CurrentLiquidity[]
  discord       String?
  twitter       String?
  opensea       String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model Pitch {
  id                     String   @default(uuid()) @id
  userId                 String
  user                   User     @relation(fields: [userId], references: [walletAddress])
  investmentId           String
  investment             Investment @relation(fields: [investmentId], references: [id])
  title                  String
  description            String
  deadline               DateTime
  initialInvestment      Int
  profitAmountEstimation Int
  isNative               Boolean
  investmentTokenAddress String
  profitPercentageAmount Int
  isExecuted             Boolean
  voteFor                Int
  voteAgainst            Int
  totalVoters            Int
  Status                 Status @default(ACTIVE)
  createdAt              DateTime @default(now())
  updatedAt              DateTime @updatedAt
}
model Stake {
  id                    String   @default(uuid()) @id
  userId                 String
  user                   User     @relation(fields: [userId], references: [walletAddress])
  investmentId           String
  investment             Investment  @relation(fields: [investmentId], references: [id])
  stake                  Int
  createdAt              DateTime @default(now())
}
model Investment {
  id                     String   @default(uuid()) @id
  userId                 String
  user                   User     @relation(fields: [userId], references: [walletAddress])
  accounts               String[] @default([])
  partnerInvestors       Stake[]
  title                  String
  description            String
  image                  String
  tokenAddress           String
  tokenSymbol            String
  tokenName              String
  pitches                Pitch[]
  chainId                Int[] @default([])
  status                 Status @default(ACTIVE)
  createdAt              DateTime @default(now())
  updatedAt              DateTime @updatedAt
}
model CurrentLiquidity {
  id                     String   @default(uuid()) @id
  userId                 String
  user                   User     @relation(fields: [userId], references: [walletAddress])
  tokenAddress           String?
  isNative               Boolean
  amount                 Int
}